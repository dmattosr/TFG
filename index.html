<html>
    <head>
		<meta charset="utf-8"/>
        <script src="https://code.jquery.com/jquery-3.3.1.js">
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
        <script>
            $(function() {
                var socket = io('http://' + document.domain + ':' + location.port);
                socket.transport = ['websocket', 'flashsocket', 'htmlfile', 'xhr-polling', 'jsonp-polling'];
                socket.on('connect', function() {
                    $('#conn_status').html('<b>Connected: ' + socket.transport + '</b>');
                    socket.emit("message", "CONNECTION ESTABLISHED")
                });
                socket.on('error', function() {
                    $('#conn_status').html('<b>Error</b>');
                });
                socket.on('disconnect', function() {
                    $('#conn_status').html('<b>Closed</b>');
                });
                socket.on('message', function(msg) {
                    $("#placeholder").html("<b>" + msg + "</b>")
                    //socket.emit("message", "BLEP")
                    //var d = $.parseJSON(msg);
                    //console.log(d);
                });
                socket.on('node_message', function(msg) {
                    $("#placeholder").html("<b>" + msg + "</b>")
                });
            });
		</script>
    </head>
    <body>
        <h1>Prueba de sockets</h1>
        <div id="conn_status">Not Connected</div>
        <div id="placeholder" style="width:600px;height:300px;"></div>
    </body>

</html>
